<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Upcoming Government Consultations</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">

        <!--[if lt IE 9]>
            <script src="js/vendor/html5-3.6-respond-1.4.2.min.js"></script>
        <![endif]-->
    </head>
    <body>
    <div class="container">
      <!-- Example row of columns -->
      <div class="row">
        <div class="col-md-12">
            <div id="app" v-cloak>
                <h1>Upcoming Government Consultations</h1>

                <div class="form-group">
                    <label for="search">Search</label>
                    <input type="search" class="form-control" id="search" placeholder="Search consultation titles" v-model="searchInput">
                </div>

                <table class="table table-hover" v-bind:style="{ display: resultsLoadedStyle }">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Starts</th>
                            <th>Ends</th>
                            <th>Topics</th>
                        </tr>
                    </thead>
                    <tbody>
                        <template  v-for="consultation in results | filterBy searchInput in 'title'">
                        <tr v-on:click="consultation.showDescription = !consultation.showDescription;" class="clickable">
                            <td>{{ consultation.title }}</td>
                            <td>{{ consultation.start | niceDate }}</td>
                            <td>{{ consultation.end | niceDate }}</td>
                            <td><span class="label label-default"  v-for="topic in consultation.topic">{{ topic }}</span></td>
                        </tr>
                        <tr v-show="consultation.showDescription" class="active">
                            <td colspan="4">
                                {{{ consultation.description }}}
                                <a class="btn btn-default" href="{{consultation.url}}">Find out more</a>
                            </td>
                        </tr>
                        </template>
                    </tbody>
                </table>
            </div>
        </div>
      </div>

      <hr>

      <footer>
        <p>Data from <a href="https://www.govt.nz/about/api/">https://www.govt.nz/about/api/</a></p>
      </footer>
    </div> <!-- /container -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>

    <script src="js/vendor/bootstrap.min.js"></script>

    <script src="http://cdn.jsdelivr.net/vue/1.0.26/vue.js"></script>

    <script src="js/main.js"></script>
    </body>
</html>
